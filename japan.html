<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan - World Dining Etiquette</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat+Brush&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- 로딩 화면 -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">테이블 세팅하는 중..</p>
        </div>
    </div>

    <!-- 상단 헤더 -->
    <header class="top-header">
        <div class="header-content">
            <button id="back-to-map-japan" class="btn-secondary back-to-map-btn">지도 돌아가기</button>
            <div class="header-square">
                <h1 class="header-title">Japan</h1>
            </div>
            <button id="reset-stage-btn" class="btn-secondary reset-btn">다시하기</button>
        </div>
    </header>

    <!-- 일본 스테이지 -->
    <div id="japan-stage" class="screen active">
        <div class="stage-container">
            <div class="stage-content">
                <!-- 말풍선 -->
                <div id="speech-bubble" class="speech-bubble">
                    <div class="speech-bubble-content">
                        <p id="speech-text"></p>
                    </div>
                    <div class="speech-bubble-tail"></div>
                    <button id="next-speech-btn" class="next-btn" style="display: none;">다음</button>
                    <div id="next-buttons-container" class="next-buttons-container" style="display: none;"></div>
                </div>

                <!-- 게임 플레이 컨테이너 -->
                <div class="japan-game-container">
                    <!-- 드롭 존 영역 -->
                    <div class="drop-zone-area">
                    <div class="table-setting">
                        <!-- 상단 cheftable -->
                        <div class="top-cheftable" style="background-image: url('resource/jp/cheftable.png');"></div>

                        <!-- 테이블 세팅 -->
                        <div class="table-mat"></div>
                        <div class="card-napkin" style="background-image: url('reciepts.png');">
                        </div>

                        <!-- 그림자 이미지들 (가장 낮은 z-index) -->
                        <div class="image-shadow shadow-dish2">
                            <img src="resource/jp/dish2_s.png" alt="dish2 shadow">
                        </div>
                        <div class="image-shadow shadow-dish3">
                            <img src="resource/jp/dish3_s.png" alt="dish3 shadow">
                        </div>
                        <div class="image-shadow shadow-dish4">
                            <img src="resource/jp/dish4_s.png" alt="dish4 shadow">
                        </div>
                        <div class="image-shadow shadow-dish5">
                            <img src="resource/jp/dish5_s.png" alt="dish5 shadow">
                        </div>
                        <div class="image-shadow shadow-dish">
                            <img src="resource/jp/dish_s.png" alt="dish shadow">
                        </div>
                        <div class="image-shadow shadow-spoon">
                            <img src="resource/jp/spoon_s.png" alt="spoon shadow">
                        </div>
                        <div class="image-shadow shadow-chopsticks">
                            <img src="resource/jp/chopsticks_s.png" alt="chopsticks shadow">
                        </div>

                        <!-- 국그릇 (기본 배치 이미지) -->
                        <div class="soup-bowl-image">
                            <img src="resource/jp/dish2.png" alt="국그릇">
                        </div>

                        <!-- dish 3, 4, 5 이미지 (드래그 불가능, 디버그 모드에서만 수정 가능) -->
                        <div class="japan-dish-3">
                            <img src="resource/jp/dish3.png" alt="dish 3">
                        </div>
                        <div class="japan-dish-4">
                            <img src="resource/jp/dish4.png" alt="dish 4">
                        </div>
                        <div class="japan-dish-5">
                            <img src="resource/jp/dish5.png" alt="dish 5">
                        </div>

                        <!-- 손 이미지 (드래그 가능) -->
                        <div class="hand-draggable" id="hand-draggable">
                            <img src="resource/jp/hand.png" alt="손">
                        </div>

                        <!-- 드롭 존들 -->
                        <div class="drop-zone" id="drop-rice-bowl" data-item="rice-bowl">
                            <div class="grab-text" id="grab-text" style="display: none;">집기</div>
                            <!-- 밥그릇 드롭존 (숟가락/젓가락용) -->
                            <div id="rice-bowl-drop-zone" class="rice-bowl-drop-zone" style="display: none;">
                                <div class="rice-bowl-zone-left">꽂기</div>
                                <div class="rice-bowl-zone-right">집기</div>
                            </div>
                        </div>
                        <div class="drop-zone" id="drop-spoon" data-item="spoon">
                        </div>
                        <!-- spoonspot 이미지 (드래그 불가) -->
                        <div class="spoonspot-image" id="spoonspot-1">
                            <img src="resource/jp/spoonstpot.png" alt="spoonspot">
                        </div>
                        <div class="spoonspot-image" id="spoonspot-2">
                            <img src="resource/jp/spoonstpot.png" alt="spoonspot">
                        </div>
                        <div class="drop-zone" id="drop-chopsticks" data-item="chopsticks">
                        </div>
                        <div class="drop-zone" id="drop-chopsticks-2" data-item="chopsticks">
                        </div>
                    </div>
                </div>
                <!-- 게임 플레이 컨테이너 끝 -->

                <!-- 젓가락 정보 슬롯 메뉴 -->
                <div id="chopsticks-info-menu" class="info-menu">
                    <div class="info-menu-tab"></div>
                    <div class="menu-header">
                        <div class="menu-icon">☰</div>
                        <h3>INFO</h3>
                        <button class="info-menu-close" onclick="closeChopsticksInfoMenu()">×</button>
                    </div>
                    <div class="info-menu-scroll-content">
                        <h3>젓가락 사용 예절</h3>
                        <div class="info-menu-image">
                            <img src="resource/jp/chopsticks.png" alt="젓가락">
                        </div>
                        <div class="info-menu-content">
                            <p>일본에서는 밥을 먹을 때 젓가락을 사용하는 것이 올바른 예절입니다.</p>
                            <p>숟가락보다는 젓가락을 사용하여 밥을 먹는 것이 일반적이며, 밥그릇을 손으로 들고 젓가락으로 먹는 것이 정상적인 식사 방법입니다.</p>
                            <p>또한 젓가락을 밥그릇에 꽂으면 안 됩니다. 이는 매우 무례한 행동으로 간주되며, 장례식에서 사용하는 방식이므로 식사 중에는 절대 피해야 합니다.</p>
                            <p>젓가락은 밥그릇 옆에 가로로 놓거나 젓가락 받침에 올려두는 것이 올바른 예절입니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 식기 손으로 들고 먹는 것 정보 메뉴 -->
                <div id="utensil-holding-info-menu" class="info-menu">
                    <div class="info-menu-tab"></div>
                    <div class="menu-header">
                        <div class="menu-icon">☰</div>
                        <h3>INFO</h3>
                        <button class="info-menu-close" onclick="closeUtensilHoldingInfoMenu()">×</button>
                    </div>
                    <div class="info-menu-scroll-content">
                        <h3>식기 사용 예절</h3>
                        <div class="info-menu-image">
                            <img src="resource/jp/spoon.png" alt="숟가락">
                        </div>
                        <div class="info-menu-content">
                            <p>일본에서는 밥그릇을 손으로 들고 먹는 것이 올바른 예절입니다.</p>
                            <p>밥그릇을 들고 숟가락이나 젓가락으로 먹는 것이 정상적인 식사 방법입니다.</p>
                            <p>밥그릇을 들지 않고 테이블에 그대로 두고 먹는 것은 예의에 어긋납니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 전부 먹는게 예의 정보 메뉴 -->
                <div id="eating-etiquette-info-menu" class="info-menu">
                    <div class="info-menu-tab"></div>
                    <div class="menu-header">
                        <div class="menu-icon">☰</div>
                        <h3>INFO</h3>
                        <button class="info-menu-close" onclick="closeEatingEtiquetteInfoMenu()">×</button>
                    </div>
                    <div class="info-menu-scroll-content">
                        <h3>식사 예절</h3>
                        <div class="info-menu-image">
                            <img src="resource/jp/dish.png" alt="밥그릇">
                        </div>
                        <div class="info-menu-content">
                            <p>일본에서는 음식을 남김없이 전부 먹는 것이 올바른 예절입니다.</p>
                            <p>음식을 남기면 주인에게 실례가 되며, 음식에 대한 존중을 보여주지 못하는 행동으로 간주됩니다.</p>
                            <p>가능한 한 음식을 남김없이 먹는 것이 일본 식사 문화의 기본 예절입니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 식사 후 인사말 정보 메뉴 -->
                <div id="after-meal-greeting-info-menu" class="info-menu">
                    <div class="info-menu-tab"></div>
                    <div class="menu-header">
                        <div class="menu-icon">☰</div>
                        <h3>INFO</h3>
                        <button class="info-menu-close" onclick="closeAfterMealGreetingInfoMenu()">×</button>
                    </div>
                    <div class="info-menu-scroll-content">
                        <h3>식사 후 인사말</h3>
                        <div class="info-menu-image">
                            <img src="resource/jp/dish.png" alt="인사말">
                        </div>
                        <div class="info-menu-content">
                            <p>일본에서는 식사를 마친 후 "고치소사마데시타"(ごちそうさまでした)라고 인사하는 것이 올바른 예절입니다.</p>
                            <p>이는 "잘 먹었습니다"라는 뜻으로, 음식을 준비해 준 사람과 식재료에 대한 감사의 마음을 표현하는 것입니다.</p>
                            <p>"이타다키마스"(잘 먹겠습니다)는 식사 전에 하는 인사말이며, 식사 후에는 반드시 "고치소사마데시타"라고 해야 합니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 결제 정보 메뉴 -->
                <div id="payment-info-menu" class="info-menu">
                    <div class="info-menu-tab"></div>
                    <div class="menu-header">
                        <div class="menu-icon">☰</div>
                        <h3>INFO</h3>
                        <button class="info-menu-close" onclick="closePaymentInfoMenu()">×</button>
                    </div>
                    <div class="info-menu-scroll-content">
                        <h3>결제 예절</h3>
                        <div class="info-menu-image">
                            <img src="resource/jp/bill2.png" alt="결제">
                        </div>
                        <div class="info-menu-content">
                            <p>일본의 많은 식당, 특히 전통적인 가게나 작은 식당에서는 현금 결제만 가능한 경우가 많습니다.</p>
                            <p>따라서 식사를 하러 갈 때는 항상 충분한 현금을 준비해 두는 것이 좋습니다.</p>
                            <p>카드가 가능한 곳이라도 현금을 선호하는 경향이 있으니 주의하세요.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 알림 모달 -->
    <div id="alert-modal" class="modal">
        <div class="modal-content">
            <p id="alert-message"></p>
            <button id="close-alert" class="btn-primary">확인</button>
        </div>
    </div>

    <!-- 디버그 모드 UI -->
    <div id="debug-panel" class="debug-panel" style="display: none;">
        <div class="debug-header">
            <h3>디버그 모드</h3>
            <button id="close-debug" class="debug-close-btn">×</button>
        </div>
        <div class="debug-content">
            <div class="debug-info">
                <p>선택된 요소: <span id="debug-selected-element">없음</span></p>
            </div>
            <div class="debug-controls">
                <label>
                    X 좌표: <input type="number" id="debug-x-value" step="0.1" style="width: 80px; margin-right: 5px;">vw
                    <input type="range" id="debug-x-slider" min="-500" max="500" value="50" step="0.1">
                </label>
                <label>
                    Y 좌표: <input type="number" id="debug-y-value" step="0.1" style="width: 80px; margin-right: 5px;">vw
                    <input type="range" id="debug-y-slider" min="-500" max="500" value="50" step="0.1">
                </label>
                <label>
                    크기: <input type="number" id="debug-size-value" step="0.1" style="width: 80px; margin-right: 5px;">vw
                    <input type="range" id="debug-size-slider" min="0.01" max="500" value="4.17" step="0.1">
                </label>
                <label>
                    회전: <input type="number" id="debug-rotation-value" step="1"
                        style="width: 80px; margin-right: 5px;">°
                    <input type="range" id="debug-rotation-slider" min="-360" max="360" value="0" step="1">
                </label>
                <div class="debug-buttons">
                    <button id="debug-save-btn" class="debug-btn">선택 저장</button>
                    <button id="debug-save-all-btn" class="debug-btn">전체 저장</button>
                    <button id="debug-reset-btn" class="debug-btn">초기화</button>
                    <button id="debug-export-btn" class="debug-btn"
                        style="background: #4CAF50; color: white; margin-top: 5px;">기본값으로 내보내기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 슬롯 메뉴 (일본 스테이지) -->
    <div class="slot-menu" id="slot-menu-japan">
        <div class="slot-menu-tab"></div>
        <div class="menu-header">
            <div class="menu-icon">☰</div>
            <h3>INVENTORY</h3>
        </div>
        <div class="slot-items">
            <div class="slot-item" data-item="spoon" data-image="resource/jp/spoon.png">
                <div class="item-icon" style="background-image: url('resource/jp/spoon.png');"></div>
                <span>숟가락</span>
            </div>
            <div class="slot-item" data-item="chopsticks" data-image="resource/jp/chopsticks.png">
                <div class="item-icon" style="background-image: url('resource/jp/chopsticks.png');"></div>
                <span>젓가락</span>
            </div>
        </div>
    </div>

    <!-- 디버그 모드 토글 버튼 -->
    <button id="debug-toggle-btn" class="debug-toggle-btn">🔧</button>

    <script src="script.js"></script>
    <script>
        // 로딩 화면 제어
        window.addEventListener('load', () => {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                // 최소 500ms 표시 후 페이드 아웃
                setTimeout(() => {
                    loadingScreen.classList.add('hide');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }, 500);
            }
        });
    </script>
</body>

</html>